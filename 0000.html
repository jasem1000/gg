<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… ÙƒØ§Ø´ÙŠØ± ØµÙŠØ¯Ù„ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠ - Ø§Ù„Ø¹Ø±Ø§Ù‚</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            color: #333;
            min-height: 100vh;
        }
        h1 {
            text-align: center;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }
        h2 {
            color: #007bff;
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
        }
        .tab {
            overflow: hidden;
            border: none;
            background-color: rgba(255,255,255,0.9);
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .tab button {
            background-color: transparent;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 20px;
            transition: 0.3s;
            font-size: 16px;
            color: #333;
            border-radius: 10px;
            margin: 0 2px;
        }
        .tab button:hover {
            background-color: #007bff;
            color: white;
        }
        .tab button.active {
            background-color: #007bff;
            color: white;
        }
        .tabcontent {
            display: none;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            gap: 20px;
        }
        .section {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            flex: 1;
        }
        #barcode-section {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            text-align: center;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.3);
            margin-bottom: 20px;
        }
        .barcode-input {
            width: 100%;
            padding: 20px;
            font-size: 24px;
            border: none;
            border-radius: 12px;
            margin: 15px 0;
            text-align: center;
            font-family: 'Courier New', monospace;
            background: rgba(255,255,255,0.95);
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        .barcode-input:focus {
            outline: none;
            box-shadow: 0 0 15px rgba(255,255,255,0.8), inset 0 2px 4px rgba(0,0,0,0.1);
            transform: scale(1.02);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        th, td {
            padding: 12px;
            text-align: right;
            border-bottom: 1px solid #eee;
        }
        th {
            background-color: #007bff;
            color: white;
            font-weight: bold;
        }
        tr:hover {
            background-color: #f8f9fa;
        }
        input, button {
            padding: 10px 15px;
            margin: 8px 0;
            border-radius: 6px;
            border: 1px solid #ddd;
            font-size: 14px;
        }
        button {
            background-color: #28a745;
            color: white;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
        }
        button:hover {
            background-color: #218838;
            transform: translateY(-2px);
        }
        #add-product-btn, #checkout-btn, #scan-btn {
            background-color: #007bff;
        }
        #add-product-btn:hover, #checkout-btn:hover, #scan-btn:hover {
            background-color: #0056b3;
        }
        .remove-btn {
            background-color: #dc3545;
            padding: 6px 12px;
            font-size: 12px;
        }
        .remove-btn:hover {
            background-color: #c82333;
        }
        .qty-btn {
            padding: 5px 10px;
            font-size: 14px;
            margin: 2px;
        }
        #total {
            font-weight: bold;
            font-size: 1.5em;
            margin: 20px 0;
            color: #007bff;
            text-align: center;
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            border-left: 5px solid #007bff;
        }
        .product-info {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-right: 4px solid #28a745;
            text-align: center;
            box-shadow: 0 2px 8px rgba(40, 167, 69, 0.2);
        }
        .barcode-status {
            padding: 12px;
            margin: 10px 0;
            border-radius: 6px;
            text-align: center;
            font-weight: bold;
        }
        .success { 
            background-color: #d4edda; 
            color: #155724; 
            border: 1px solid #c3e6cb; 
        }
        .error { 
            background-color: #f8d7da; 
            color: #721c24; 
            border: 1px solid #f5c6cb; 
        }
        .loading { 
            background-color: #d1ecf1; 
            color: #0c5460; 
            border: 1px solid #bee5eb; 
        }
        .search-box {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #007bff;
            border-radius: 6px;
            font-size: 16px;
        }
        .search-box:focus {
            outline: none;
            border-color: #0056b3;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.3);
        }
        .warning {
            background-color: #fff3cd !important;
            color: #856404 !important;
            border: 1px solid #ffeaa7 !important;
        }
        .expired {
            background-color: #f8d7da !important;
            color: #721c24 !important;
            border: 1px solid #f5c6cb !important;
        }
        .form-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        .form-group input {
            flex: 1;
            min-width: 150px;
        }
        #stats-section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }
        .stats-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 10px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        .stats-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #007bff;
        }
        .stats-label {
            color: #6c757d;
            font-size: 1.1em;
        }
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            .barcode-input {
                font-size: 18px;
                padding: 15px;
            }
            .form-group {
                flex-direction: column;
            }
            .form-group input {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <h1>ğŸ¥ Ù†Ø¸Ø§Ù… ÙƒØ§Ø´ÙŠØ± ØµÙŠØ¯Ù„ÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠ - Ø§Ù„Ø¹Ø±Ø§Ù‚</h1>
    
    <div class="tab">
        <button class="tablinks active" onclick="openTab(event, 'sales')">ğŸ’Š Ø§Ù„Ø¨ÙŠØ¹</button>
        <button class="tablinks" onclick="openTab(event, 'inventory')">ğŸ“¦ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</button>
        <button class="tablinks" onclick="accessStats()">ğŸ“ˆ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</button>
    </div>

    <!-- ØªØ¨ Ø§Ù„Ø¨ÙŠØ¹ -->
    <div id="sales" class="tabcontent" style="display: block;">
        <!-- Ù‚Ø³Ù… Ù‚Ø§Ø±Ø¦ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ -->
        <div id="barcode-section">
            <h2>ğŸ“± Ù‚Ø§Ø±Ø¦ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ø³Ø±ÙŠØ¹</h2>
            <p style="margin: 10px 0;">Ø§Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯ÙˆØ§Ø¡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</p>
            <input type="text" id="barcode-input" class="barcode-input" placeholder="ğŸ“· Ø§Ù…Ø³Ø­ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù‡Ù†Ø§..." autofocus maxlength="20">
            <div id="barcode-status" class="barcode-status"></div>
            <button id="scan-btn">â–¶ï¸ Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø³Ø­ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</button>
            <div class="product-info" id="product-info" style="display: none;">
                <h3 id="scanned-product-name" style="margin: 0; color: #155724;"></h3>
                <p style="margin: 5px 0; color: #28a745;">âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù„Ø§Ø¬ Ù„Ù„Ø³Ù„Ø©</p>
            </div>
        </div>

        <div class="container">
            <div id="cart" class="section">
                <h2>ğŸ›’ Ø§Ù„Ø³Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h2>
                <table id="cart-table">
                    <thead>
                        <tr>
                            <th>Ø§Ø³Ù… Ø§Ù„Ø¹Ù„Ø§Ø¬</th>
                            <th>Ø§Ù„Ø³Ø¹Ø± (Ø¯.Ø¹)</th>
                            <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                            <th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ (Ø¯.Ø¹)</th>
                            <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div id="total">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 0 Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ</div>
                <button id="checkout-btn" style="width: 100%; padding: 15px; font-size: 18px;">ğŸ’³ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ¹ ÙˆØ·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©</button>
                <button id="clear-cart-btn" class="remove-btn" style="width: 100%; margin-top: 10px;">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø©</button>
            </div>
        </div>
    </div>

    <!-- ØªØ¨ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† -->
    <div id="inventory" class="tabcontent">
        <div class="section">
            <h2>ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h2>
            <div class="form-group">
                <input type="text" id="product-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù„Ø§Ø¬">
                <input type="text" id="product-barcode" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯" maxlength="20">
                <input type="number" id="product-price" placeholder="Ø§Ù„Ø³Ø¹Ø± (Ø¯.Ø¹)" min="0">
                <input type="number" id="product-stock" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø©" min="0">
                <input type="date" id="product-expiry" placeholder="ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©">
            </div>
            <button id="add-product-btn" style="width: 100%; padding: 12px;">â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù„Ø§Ø¬ Ø¬Ø¯ÙŠØ¯</button>
            
            <input type="text" id="search-input" class="search-box" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù„Ø§Ø¬ Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯...">
            
            <table id="inventory-table">
                <thead>
                    <tr>
                        <th>Ø¨Ø§Ø±ÙƒÙˆØ¯</th>
                        <th>Ø§Ø³Ù… Ø§Ù„Ø¹Ù„Ø§Ø¬</th>
                        <th>Ø§Ù„Ø³Ø¹Ø± (Ø¯.Ø¹)</th>
                        <th>Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø©</th>
                        <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</th>
                        <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <!-- ØªØ¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
    <div id="stats" class="tabcontent">
        <div id="stats-section">
            <h2>ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h2>
            
            <div class="stats-card">
                <div class="stats-number" id="total-sales">0</div>
                <div class="stats-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ)</div>
            </div>
            
            <div class="stats-card">
                <div class="stats-number" id="sales-count">0</div>
                <div class="stats-label">Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</div>
            </div>
            
            <div class="stats-card">
                <div class="stats-number" id="total-products-sold">0</div>
                <div class="stats-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ…ÙŠØ§Øª Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©</div>
            </div>
            
            <h3 style="margin-top: 30px;">ğŸ† Ø£ÙØ¶Ù„ 10 Ø¹Ù„Ø§Ø¬Ø§Øª Ù…Ø¨ÙŠØ¹Ø§Ù‹</h3>
            <table id="stats-table">
                <thead>
                    <tr>
                        <th>Ø§Ù„ØªØ±ØªÙŠØ¨</th>
                        <th>Ø§Ø³Ù… Ø§Ù„Ø¹Ù„Ø§Ø¬</th>
                        <th>Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©</th>
                        <th>Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø¯.Ø¹)</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            
            <div style="margin-top: 20px; padding: 15px; background: #e9ecef; border-radius: 8px;">
                <h4>ğŸ“… Ø¢Ø®Ø± 5 Ø¹Ù…Ù„ÙŠØ§Øª Ø¨ÙŠØ¹</h4>
                <table id="recent-sales-table">
                    <thead>
                        <tr>
                            <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                            <th>Ø§Ø³Ù… Ø§Ù„Ø¹Ù„Ø§Ø¬</th>
                            <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                            <th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ (Ø¯.Ø¹)</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        let products = JSON.parse(localStorage.getItem('products')) || [];
        let cart = [];
        let sales = JSON.parse(localStorage.getItem('sales')) || [];
        let isScanning = false;
        const password = '20001000';

        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© ÙÙŠ Ø§Ù„Ø¹Ø±Ø§Ù‚
        const defaultProducts = [
            { name: 'Ø³ÙŠØªÙŠØ±ÙŠØ²ÙŠÙ† (Ø²ÙŠØ±ØªÙŠÙƒ)', barcode: 'CET001', price: 7500, stock: 100, expiry_date: '2026-12-31' },
            { name: 'Ù„ÙˆØ±Ø§ØªØ§Ø¯ÙŠÙ† (ÙƒÙ„Ø§Ø±ÙŠØªÙŠÙ†)', barcode: 'LOR001', price: 8000, stock: 80, expiry_date: '2026-11-30' },
            { name: 'Ø¯ÙŠÙÙŠÙ†Ù‡ÙŠØ¯Ø±Ø§Ù…ÙŠÙ† (Ø¨ÙŠÙ†Ø¯ÙŠØ±ÙŠÙ„)', barcode: 'DIP001', price: 5000, stock: 50, expiry_date: '2027-01-15' },
            { name: 'Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„ (Ø¨Ø§Ù†Ø§Ø¯ÙˆÙ„)', barcode: 'PAR001', price: 4000, stock: 200, expiry_date: '2027-03-20' },
            { name: 'Ø£Ø³Ø¨Ø±ÙŠÙ†', barcode: 'ASP001', price: 3000, stock: 150, expiry_date: '2026-10-10' },
            { name: 'Ø¥ÙŠØ¨ÙˆØ¨Ø±ÙˆÙÙŠÙ† (Ø¨Ø±ÙˆÙÙŠÙ†)', barcode: 'IBU001', price: 6000, stock: 120, expiry_date: '2027-02-28' },
            { name: 'Ù†Ø§Ø¨Ø±ÙˆÙƒØ³ÙŠÙ†', barcode: 'NAP001', price: 7000, stock: 90, expiry_date: '2026-09-30' },
            { name: 'Ù‡ÙŠØ¯Ø±ÙˆÙƒÙˆØ±ØªÙŠØ²ÙˆÙ† ÙƒØ±ÙŠÙ…', barcode: 'HYD001', price: 12000, stock: 60, expiry_date: '2027-04-15' },
            { name: 'ÙƒÙ„ÙˆØªØ±ÙŠÙ…Ø§Ø²ÙˆÙ„', barcode: 'CLO001', price: 9000, stock: 40, expiry_date: '2026-08-31' },
            { name: 'Ø£ÙˆÙ…ÙŠØ¨Ø±Ø§Ø²ÙˆÙ„', barcode: 'OME001', price: 15000, stock: 70, expiry_date: '2027-05-20' },
            { name: 'Ù„ÙˆØ¨ÙŠØ±Ø§Ù…ÙŠØ¯', barcode: 'LOP001', price: 5500, stock: 100, expiry_date: '2026-07-31' },
            { name: 'Ø¨Ø²Ù…ÙˆØª Ø³ÙˆØ¨Ø³Ø§Ù„ÙŠØ³ÙŠÙ„Ø§Øª', barcode: 'BIZ001', price: 6500, stock: 80, expiry_date: '2027-06-15' },
            { name: 'ÙÙŠØªØ§Ù…ÙŠÙ† Ø¯', barcode: 'VIT001', price: 4000, stock: 200, expiry_date: '2026-12-31' },
            { name: 'ÙÙŠØ±ÙˆØ³ Ø³Ù„ÙØ§Øª', barcode: 'FER001', price: 5000, stock: 150, expiry_date: '2027-01-31' },
            { name: 'ÙƒØ§Ù„Ø³ÙŠÙˆÙ… Ù…Ø¹ ÙÙŠØªØ§Ù…ÙŠÙ† Ø¯3', barcode: 'CAL001', price: 8000, stock: 100, expiry_date: '2026-11-30' },
            { name: 'Ø£Ù…ÙˆÙƒØ³ÙŠØ³ÙŠÙ„ÙŠÙ†', barcode: 'AMX001', price: 10000, stock: 90, expiry_date: '2027-03-15' },
            { name: 'Ø£Ø²ÙŠØ«Ø±ÙˆÙ…Ø§ÙŠØ³ÙŠÙ†', barcode: 'AZI001', price: 18000, stock: 60, expiry_date: '2027-02-20' },
            { name: 'Ø³ÙŠØ¨Ø±ÙˆÙÙ„ÙˆÙƒØ³Ø§Ø³ÙŠÙ†', barcode: 'CIP001', price: 12000, stock: 70, expiry_date: '2026-12-25' },
            { name: 'Ù…ÙŠØªØ±ÙˆÙ†ÙŠØ¯Ø§Ø²ÙˆÙ„', barcode: 'MET001', price: 6000, stock: 120, expiry_date: '2027-04-10' },
            { name: 'Ø¯ÙŠÙƒÙ„ÙˆÙÙŠÙ†Ø§Ùƒ', barcode: 'DIC001', price: 8500, stock: 110, expiry_date: '2026-11-20' },
            { name: 'Ø±Ø§Ù…ÙŠØ¨Ø±ÙŠÙ„', barcode: 'RAM001', price: 11000, stock: 50, expiry_date: '2027-05-05' },
            { name: 'Ø£ØªÙˆØ±ÙØ§Ø³ØªØ§ØªÙŠÙ†', barcode: 'ATO001', price: 14000, stock: 80, expiry_date: '2027-06-30' },
            { name: 'Ù…ÙŠØªÙˆÙÙˆØ±Ù…ÙŠÙ†', barcode: 'MET002', price: 7000, stock: 150, expiry_date: '2026-10-31' },
            { name: 'Ø¬Ù„ÙŠØ¨ÙŠÙ†ÙƒÙ„Ø§Ù…ÙŠØ¯', barcode: 'GLI001', price: 6500, stock: 100, expiry_date: '2027-01-25' },
            { name: 'Ø£Ù…Ø§Ù„ÙˆØ¯ÙŠØ¨ÙŠÙ†', barcode: 'AMA001', price: 9000, stock: 90, expiry_date: '2027-03-31' }
        ];

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ÙØ§Ø±ØºØ§Ù‹
        if (products.length === 0) {
            products = [...defaultProducts];
            localStorage.setItem('products', JSON.stringify(products));
        }

        // Ø¥Ù†Ø´Ø§Ø¡ UUID Ù„Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯
        function generateBarcode() {
            return 'IQ' + Date.now().toString().slice(-8);
        }

        // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ø±ÙƒÙˆØ¯
        function ensureBarcode(product) {
            if (!product.barcode) {
                product.barcode = generateBarcode();
            }
            return product;
        }

        // Ø­Ø³Ø§Ø¨ Ø£ÙŠØ§Ù… Ø­ØªÙ‰ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©
        function daysUntilExpiry(expiryDate) {
            if (!expiryDate) return null;
            const today = new Date();
            const expiry = new Date(expiryDate);
            const diffTime = expiry - today;
            return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        }

        // ÙØªØ­ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        // Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function accessStats() {
            const enteredPass = prompt('ğŸ” Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª:');
            if (enteredPass === password) {
                openTab({currentTarget: event.target}, 'stats');
                updateStats();
                showStatus('âœ… ØªÙ… Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } else {
                alert('âŒ Ø±Ù…Ø² Ø§Ù„ÙˆØµÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­!');
                showStatus('Ø±Ù…Ø² Ø§Ù„ÙˆØµÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­', 'error');
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStats() {
            let totalSales = 0;
            let salesCount = sales.length;
            let totalProductsSold = 0;
            let productSales = {};

            sales.forEach(sale => {
                totalSales += sale.total;
                totalProductsSold += sale.quantity;
                if (productSales[sale.name]) {
                    productSales[sale.name].quantity += sale.quantity;
                    productSales[sale.name].revenue += sale.total;
                } else {
                    productSales[sale.name] = { quantity: sale.quantity, revenue: sale.total };
                }
            });

            document.getElementById('total-sales').textContent = totalSales.toLocaleString();
            document.getElementById('sales-count').textContent = salesCount.toLocaleString();
            document.getElementById('total-products-sold').textContent = totalProductsSold.toLocaleString();

            // Ø£ÙØ¶Ù„ 10 Ø¹Ù„Ø§Ø¬Ø§Øª
            const tbody = document.querySelector('#stats-table tbody');
            tbody.innerHTML = '';
            const sortedProducts = Object.entries(productSales)
                .sort((a, b) => b[1].revenue - a[1].revenue)
                .slice(0, 10);
            
            sortedProducts.forEach(([name, data], index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${name}</td>
                    <td>${data.quantity}</td>
                    <td>${data.revenue.toLocaleString()}</td>
                `;
                tbody.appendChild(row);
            });

            // Ø¢Ø®Ø± 5 Ø¹Ù…Ù„ÙŠØ§Øª
            const recentTbody = document.querySelector('#recent-sales-table tbody');
            recentTbody.innerHTML = '';
            const recentSales = sales.slice(-5).reverse();
            recentSales.forEach(sale => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${new Date(sale.date).toLocaleString('ar-IQ')}</td>
                    <td>${sale.name}</td>
                    <td>${sale.quantity}</td>
                    <td>${sale.total.toLocaleString()}</td>
                `;
                recentTbody.appendChild(row);
            });
        }

        // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
        function updateInventoryTable(searchTerm = '') {
            const tbody = document.querySelector('#inventory-table tbody');
            tbody.innerHTML = '';
            
            let filteredProducts = products.filter(product => 
                product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                product.barcode.includes(searchTerm)
            );
            
            filteredProducts.forEach((product, index) => {
                const row = document.createElement('tr');
                let expiryClass = '';
                let expiryText = 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
                
                if (product.expiry_date) {
                    const daysLeft = daysUntilExpiry(product.expiry_date);
                    expiryText = new Date(product.expiry_date).toLocaleDateString('ar-IQ');
                    
                    if (daysLeft <= 0) {
                        expiryClass = 'expired';
                        expiryText += ' âŒ Ù…Ù†ØªÙ‡ÙŠ';
                    } else if (daysLeft <= 10) {
                        expiryClass = 'warning';
                        expiryText += ` âš ï¸ (${daysLeft} ÙŠÙˆÙ…)`;
                    }
                }
                
                row.className = expiryClass;
                row.innerHTML = `
                    <td><code>${product.barcode}</code></td>
                    <td>${product.name}</td>
                    <td>${product.price.toLocaleString()}</td>
                    <td><strong>${product.stock}</strong></td>
                    <td class="${expiryClass}">${expiryText}</td>
                    <td>
                        <button onclick="addToCartByBarcode('${product.barcode}')" style="background: #28a745;">â•</button>
                        <button class="remove-btn" onclick="removeProduct(${index})">ğŸ—‘ï¸</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
        document.getElementById('search-input').addEventListener('input', (e) => {
            updateInventoryTable(e.target.value);
        });

        // Ø¥Ø¶Ø§ÙØ© Ø¹Ù„Ø§Ø¬ Ø¬Ø¯ÙŠØ¯
        document.getElementById('add-product-btn').addEventListener('click', () => {
            const name = document.getElementById('product-name').value.trim();
            const barcode = document.getElementById('product-barcode').value.trim() || generateBarcode();
            const price = parseFloat(document.getElementById('product-price').value);
            const stock = parseInt(document.getElementById('product-stock').value);
            const expiry_date = document.getElementById('product-expiry').value;
            
            if (name && !isNaN(price) && !isNaN(stock) && stock >= 0 && price > 0) {
                const newProduct = ensureBarcode({ name, barcode, price, stock, expiry_date });
                
                const existingProduct = products.find(p => p.barcode === barcode);
                if (existingProduct && existingProduct.name !== name) {
                    alert('Ø±Ù‚Ù… Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„!');
                    return;
                }
                
                if (existingProduct) {
                    existingProduct.stock += stock;
                    existingProduct.name = name;
                    existingProduct.price = price;
                    if (expiry_date) existingProduct.expiry_date = expiry_date;
                    showStatus(`ØªÙ… ØªØ­Ø¯ÙŠØ« ${name} Ø¨Ù†Ø¬Ø§Ø­`, 'success');
                } else {
                    products.push(newProduct);
                    showStatus(`ØªÙ… Ø¥Ø¶Ø§ÙØ© ${name} Ø¨Ù†Ø¬Ø§Ø­`, 'success');
                }
                
                localStorage.setItem('products', JSON.stringify(products));
                updateInventoryTable();
                clearInputs();
            } else {
                showStatus('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­', 'error');
            }
        });

        // Ù…Ø³Ø­ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
        function clearInputs() {
            document.getElementById('product-name').value = '';
            document.getElementById('product-barcode').value = '';
            document.getElementById('product-price').value = '';
            document.getElementById('product-stock').value = '';
            document.getElementById('product-expiry').value = '';
            document.getElementById('search-input').value = '';
        }

        // Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø© Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯
        function addToCartByBarcode(barcode) {
            const product = products.find(p => p.barcode === barcode);
            if (product && product.stock > 0) {
                if (product.expiry_date) {
                    const daysLeft = daysUntilExpiry(product.expiry_date);
                    if (daysLeft <= 0) {
                        showStatus(`${product.name} Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©!`, 'error');
                        return;
                    } else if (daysLeft <= 10) {
                        if (!confirm(`âš ï¸ ØªØ­Ø°ÙŠØ±: ${product.name} ÙŠÙ†ØªÙ‡ÙŠ Ø¨Ø¹Ø¯ ${daysLeft} Ø£ÙŠØ§Ù…`)) {
                            return;
                        }
                    }
                }
                addToCart(product);
            } else {
                showStatus('Ø§Ù„Ø¹Ù„Ø§Ø¬ ØºÙŠØ± Ù…ØªÙˆÙØ± ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†', 'error');
            }
        }

        // Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©
        function addToCart(product) {
            const cartItem = cart.find(item => item.barcode === product.barcode);
            if (cartItem) {
                if (product.stock > cartItem.quantity) {
                    cartItem.quantity++;
                    showStatus(`ØªÙ… Ø²ÙŠØ§Ø¯Ø© ${product.name}`, 'success');
                } else {
                    showStatus('Ø§Ù„ÙƒÙ…ÙŠØ© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø© ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†', 'error');
                }
            } else {
                cart.push({ ...product, quantity: 1 });
                showStatus(`${product.name} ØªÙ…Øª Ø¥Ø¶Ø§ÙØªÙ‡ Ù„Ù„Ø³Ù„Ø©`, 'success');
                document.getElementById('product-info').style.display = 'block';
                document.getElementById('scanned-product-name').textContent = product.name;
                setTimeout(() => {
                    document.getElementById('product-info').style.display = 'none';
                }, 2000);
            }
            updateCartTable();
        }

        // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø³Ù„Ø©
        function updateCartTable() {
            const tbody = document.querySelector('#cart-table tbody');
            tbody.innerHTML = '';
            let total = 0;
            
            cart.forEach((item, index) => {
                const subtotal = item.price * item.quantity;
                total += subtotal;
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><strong>${item.name}</strong></td>
                    <td>${item.price.toLocaleString()}</td>
                    <td>
                        <button class="qty-btn remove-btn" onclick="changeQuantity(${index}, -1)">âˆ’</button>
                        <span style="margin: 0 10px;">${item.quantity}</span>
                        <button class="qty-btn" style="background: #ffc107; color: #000;" onclick="changeQuantity(${index}, 1)">+</button>
                    </td>
                    <td><strong>${subtotal.toLocaleString()}</strong></td>
                    <td>
                        <button class="remove-btn qty-btn" onclick="removeFromCart(${index})">ğŸ—‘ï¸</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            document.getElementById('total').innerHTML = `ğŸ’° Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: <strong>${total.toLocaleString()} Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ</strong>`;
        }

        // ØªØºÙŠÙŠØ± Ø§Ù„ÙƒÙ…ÙŠØ©
        function changeQuantity(index, change) {
            const cartItem = cart[index];
            const product = products.find(p => p.barcode === cartItem.barcode);
            if (cartItem.quantity + change > 0 && cartItem.quantity + change <= product.stock) {
                cartItem.quantity += change;
                updateCartTable();
                if (change > 0) {
                    showStatus(`ØªÙ… Ø²ÙŠØ§Ø¯Ø© ${cartItem.name}`, 'success');
                }
            } else if (cartItem.quantity + change > product.stock) {
                showStatus('Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©', 'error');
            }
        }

        // Ø¥Ø²Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ø³Ù„Ø©
        function removeFromCart(index) {
            const itemName = cart[index].name;
            cart.splice(index, 1);
            updateCartTable();
            showStatus(`${itemName} ØªÙ…Øª Ø¥Ø²Ø§Ù„ØªÙ‡ Ù…Ù† Ø§Ù„Ø³Ù„Ø©`, 'success');
        }

        // Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø©
        document.getElementById('clear-cart-btn').addEventListener('click', () => {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù…Ù† Ø§Ù„Ø³Ù„Ø©ØŸ')) {
                cart = [];
                updateCartTable();
                showStatus('ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„', 'success');
            }
        });

        // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ¹
        document.getElementById('checkout-btn').addEventListener('click', () => {
            if (cart.length > 0) {
                let canCheckout = true;
                let saleItems = [];
                
                cart.forEach(item => {
                    const product = products.find(p => p.barcode === item.barcode);
                    if (product.expiry_date) {
                        const daysLeft = daysUntilExpiry(product.expiry_date);
                        if (daysLeft <= 0) {
                            showStatus(`${product.name}: Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©!`, 'error');
                            canCheckout = false;
                            return;
                        }
                    }
                    if (product.stock >= item.quantity) {
                        product.stock -= item.quantity;
                        saleItems.push({
                            date: new Date().toLocaleString('ar-IQ'),
                            barcode: item.barcode,
                            name: item.name,
                            quantity: item.quantity,
                            total: item.price * item.quantity
                        });
                    } else {
                        showStatus(`ÙƒÙ…ÙŠØ© ${product.name} ØºÙŠØ± ÙƒØ§ÙÙŠØ©!`, 'error');
                        canCheckout = false;
                    }
                });
                
                if (canCheckout && saleItems.length === cart.length) {
                    sales.push(...saleItems);
                    localStorage.setItem('products', JSON.stringify(products));
                    localStorage.setItem('sales', JSON.stringify(sales));
                    
                    // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©
                    printReceipt(saleItems, total);
                    
                    cart = [];
                    updateInventoryTable();
                    updateCartTable();
                    showStatus(`âœ… ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ¹ Ø¨Ù†Ø¬Ø§Ø­ - Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${total.toLocaleString()} Ø¯.Ø¹`, 'success');
                }
            } else {
                showStatus('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©!', 'error');
            }
        });

        // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„
        function printReceipt(items, total) {
            const receipt = `
                ================================
                ğŸ¥ ØµÙŠØ¯Ù„ÙŠØ© Ø§Ù„Ø¹Ø±Ø§Ù‚ - Ø¥ÙŠØµØ§Ù„ Ø¨ÙŠØ¹
                Ø§Ù„ØªØ§Ø±ÙŠØ®: ${new Date().toLocaleString('ar-IQ')}
                ================================
                
                ${items.map(item => `
                ${item.name}
                Ø§Ù„ÙƒÙ…ÙŠØ©: ${item.quantity} Ã— ${item.price.toLocaleString()} Ø¯.Ø¹ = ${item.total.toLocaleString()} Ø¯.Ø¹
                `).join('\n\n')}
                
                ================================
                Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total.toLocaleString()} Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ
                ================================
                Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ… Ø¹Ù„Ù‰ Ø«Ù‚ØªÙƒÙ… Ø¨Ù†Ø§
                ğŸ¥ ØµÙŠØ¯Ù„ÙŠØ© Ø§Ù„Ø¹Ø±Ø§Ù‚
            `;
            
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html dir="rtl">
                <head><title>Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ø¨ÙŠØ¹</title>
                <style>
                    body { font-family: Arial, sans-serif; font-size: 14px; margin: 20px; }
                    pre { white-space: pre-wrap; font-family: monospace; }
                </style>
                </head>
                <body><pre>${receipt}</pre></body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        // Ø­Ø°Ù Ø¹Ù„Ø§Ø¬
        function removeProduct(index) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù„Ø§Ø¬ØŸ')) {
                const productName = products[index].name;
                products.splice(index, 1);
                localStorage.setItem('products', JSON.stringify(products));
                updateInventoryTable();
                showStatus(`${productName} ØªÙ… Ø­Ø°ÙÙ‡ Ø¨Ù†Ø¬Ø§Ø­`, 'success');
            }
        }

        // ÙˆØ¸Ø§Ø¦Ù Ù‚Ø§Ø±Ø¦ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯
        const barcodeInput = document.getElementById('barcode-input');
        const barcodeStatus = document.getElementById('barcode-status');

        // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ù…Ø¯Ø®Ù„Ø§Øª
        barcodeInput.addEventListener('input', function(e) {
            const barcode = e.target.value.trim();
            if (barcode.length >= 3 && isScanning) {
                processBarcode(barcode);
                e.target.value = '';
            }
        });

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯
        function processBarcode(barcode) {
            showStatus('ğŸ” Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...', 'loading');
            
            setTimeout(() => {
                const product = products.find(p => p.barcode === barcode);
                
                if (product && product.stock > 0) {
                    addToCartByBarcode(barcode);
                } else {
                    showStatus('Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ø£Ùˆ Ù†ÙØ¯ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†', 'error');
                }
            }, 300);
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø§Ù„Ø©
        function showStatus(message, type) {
            barcodeStatus.className = `barcode-status ${type}`;
            barcodeStatus.innerHTML = `ğŸ“¦ ${message}`;
            
            setTimeout(() => {
                if (barcodeStatus.textContent.includes(message)) {
                    barcodeStatus.textContent = '';
                    barcodeStatus.className = 'barcode-status';
                }
            }, 3000);
        }

        // ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø³Ø­
        document.getElementById('scan-btn').addEventListener('click', function() {
            isScanning = !isScanning;
            if (isScanning) {
                this.innerHTML = 'â¹ï¸ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø³Ø­';
                this.style.backgroundColor = '#dc3545';
                barcodeInput.focus();
                showStatus('âœ… Ø¬Ø§Ù‡Ø² Ù„Ù„Ù…Ø³Ø­ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ!', 'success');
            } else {
                this.innerHTML = 'â–¶ï¸ Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø³Ø­ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ';
                this.style.backgroundColor = '#007bff';
                showStatus('â¸ï¸ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø³Ø­', 'error');
            }
        });

        // Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
        barcodeInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && isScanning) {
                const barcode = e.target.value.trim();
                if (barcode) {
                    processBarcode(barcode);
                    e.target.value = '';
                }
            }
        });

        // Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
        document.addEventListener('keydown', function(e) {
            // F1: Ø¨Ø¯Ø¡/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø³Ø­
            if (e.key === 'F1') {
                e.preventDefault();
                document.getElementById('scan-btn').click();
            }
            // F2: Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ¹
            if (e.key === 'F2') {
                e.preventDefault();
                document.getElementById('checkout-btn').click();
            }
            // ESC: Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø©
            if (e.key === 'Escape') {
                e.preventDefault();
                document.getElementById('clear-cart-btn').click();
            }
            // Ctrl + N: ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
            if (e.ctrlKey && e.key === 'n') {
                e.preventDefault();
                openTab({currentTarget: document.querySelector('.tablinks:nth-child(2)')}, 'inventory');
            }
        });

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        document.addEventListener('DOMContentLoaded', function() {
            products = products.map(product => ensureBarcode(product));
            localStorage.setItem('products', JSON.stringify(products));
            
            updateInventoryTable();
            updateCartTable();
            barcodeInput.focus();
            
            // Ø§Ù„ØªØ±Ø­ÙŠØ¨
            showStatus('ğŸ¥ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©!', 'success');
            setTimeout(() => {
                showStatus('', '');
            }, 3000);
        });
    </script>
</body>
</html>
